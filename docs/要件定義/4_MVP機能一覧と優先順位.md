# MVP機能一覧と優先順位

## 機能一覧

### 1. 認証・アカウント管理機能

#### 1.1 ユーザー登録・ログイン
- **機能概要**: ユーザーがアカウントを作成し、ログインできる
- **詳細**:
  - メールアドレスとパスワードでの登録
  - GoogleアカウントでのOAuth認証（NextAuth.js）
  - メール認証（Nodemailer）
  - パスワードリセット機能
- **優先度**: 高（必須）
- **技術**: NextAuth.js, Nodemailer, MongoDB

#### 1.2 プロフィール管理
- **機能概要**: ユーザーがプロフィール情報を管理できる
- **詳細**:
  - 名前、メールアドレスの編集
  - アバター画像のアップロード
  - スキルレベル設定（初心者、初級者、中級者、上級者）
  - 使用言語・フレームワークの設定
- **優先度**: 中
- **技術**: MongoDB, Mongoose, Next.js API Routes

---

### 2. コード投稿・レビュー機能

#### 2.1 コード投稿
- **機能概要**: ユーザーがコードを投稿できる
- **詳細**:
  - コードエディタでの直接入力
  - ファイルアップロード（.js, .ts, .py, .java, .cpp, .goなど）
  - コードの言語自動検出
  - コードのタイトル・説明の入力
  - 公開/非公開設定
- **優先度**: 高（必須）
- **技術**: Next.js, MUI, ファイルアップロード

#### 2.2 AIコードレビュー
- **機能概要**: Claude Haiku 4.5を使用してコードレビューを実行
- **詳細**:
  - コードの構文チェック
  - ロジックエラーの検出
  - コード品質の評価（可読性、パフォーマンス、セキュリティ）
  - 改善提案の提供
  - ベストプラクティスの指摘
  - 言語・フレームワークに応じたレビュー
- **優先度**: 高（必須）
- **技術**: Claude API (Haiku 4.5), Next.js API Routes

#### 2.3 レビュー結果の表示
- **機能概要**: AIレビューの結果を分かりやすく表示
- **詳細**:
  - レビュー結果の構造化表示（エラー、警告、提案）
  - コードの該当箇所のハイライト
  - 改善前後のコード比較
  - レビュー結果のマークダウン表示
- **優先度**: 高（必須）
- **技術**: MUI, シンタックスハイライト

#### 2.4 レビュー履歴の保存・閲覧
- **機能概要**: 過去のレビュー結果を保存し、後から閲覧できる
- **詳細**:
  - レビュー履歴の一覧表示
  - レビュー履歴の詳細閲覧
  - レビュー履歴の検索・フィルタリング
  - レビュー履歴の削除
- **優先度**: 中
- **技術**: MongoDB, Mongoose, Next.js

---

### 3. ダッシュボード機能

#### 3.1 学習進捗の可視化
- **機能概要**: ユーザーの学習進捗を可視化
- **詳細**:
  - 投稿したコードの数
  - レビューを受けた回数
  - コード品質スコアの推移（グラフ）
  - 改善されたポイントの記録
  - よくある指摘事項の統計
- **優先度**: 中
- **技術**: MongoDB, Mongoose, Chart.js or Recharts, MUI

#### 3.2 統計情報の表示
- **機能概要**: ユーザーの活動統計を表示
- **詳細**:
  - 今月の投稿数
  - 今月のレビュー数
  - 最もレビューを受けた言語
  - 改善率の推移
- **優先度**: 低（MVPでは後回し）
- **技術**: MongoDB, Mongoose

---

### 4. プラン・課金機能

#### 4.1 無料プラン
- **機能概要**: 無料で基本的な機能を利用できる
- **詳細**:
  - 月5回までのコードレビュー
  - 基本的なレビュー機能
  - レビュー履歴の保存（30日間）
- **優先度**: 高（必須）
- **技術**: MongoDB, Mongoose

#### 4.2 有料プラン
- **機能概要**: より多くの機能を利用できる有料プラン
- **詳細**:
  - 月50回までのコードレビュー（ベーシックプラン）
  - 無制限のコードレビュー（プレミアムプラン）
  - 詳細なレビュー（セキュリティ、パフォーマンス分析）
  - レビュー履歴の無期限保存
- **優先度**: 中（MVPでは後回し、または簡易実装）
- **技術**: Stripe or 決済API, MongoDB

---

### 5. 通知機能

#### 5.1 メール通知
- **機能概要**: レビュー完了時にメール通知を送信
- **詳細**:
  - レビュー完了時のメール通知
  - 週次レポートのメール送信
  - レビュー結果のメール送信
- **優先度**: 中
- **技術**: Nodemailer, Next.js API Routes

#### 5.2 アプリ内通知
- **機能概要**: アプリ内で通知を表示
- **詳細**:
  - レビュー完了時の通知
  - システムメッセージの通知
- **優先度**: 低（MVPでは後回し）
- **技術**: Next.js, MUI

---

### 6. 管理機能（管理者向け）

#### 6.1 ユーザー管理
- **機能概要**: 管理者がユーザーを管理できる
- **詳細**:
  - ユーザー一覧の表示
  - ユーザーの詳細情報の閲覧
  - ユーザーの削除・停止
- **優先度**: 低（MVPでは後回し）
- **技術**: MongoDB, Mongoose, Next.js

#### 6.2 レビュー履歴管理
- **機能概要**: 管理者がレビュー履歴を管理できる
- **詳細**:
  - レビュー履歴の一覧表示
  - レビュー履歴の詳細閲覧
  - 問題のあるレビューの削除
- **優先度**: 低（MVPでは後回し）
- **技術**: MongoDB, Mongoose, Next.js

---

## 機能の優先順位

### Phase 1: MVP必須機能（最初のリリース）

1. **ユーザー登録・ログイン**（Google OAuth含む）
2. **コード投稿**（コードエディタ、ファイルアップロード）
3. **AIコードレビュー**（Claude Haiku 4.5）
4. **レビュー結果の表示**
5. **無料プラン**（月5回まで）
6. **レビュー履歴の保存・閲覧**（基本機能）

### Phase 2: MVP推奨機能（最初のリリースに含める）

1. **プロフィール管理**（基本情報、スキルレベル設定）
2. **学習進捗の可視化**（基本的な統計）
3. **メール通知**（レビュー完了時）
4. **コードの言語自動検出**

### Phase 3: 後続リリース（MVP後）

1. **有料プラン**（決済機能）
2. **詳細な統計情報**
3. **アプリ内通知**
4. **管理者機能**
5. **コミュニティ機能**（他のユーザーのコード閲覧）
6. **シェア機能**

---

## 技術スタック詳細

### フロントエンド
- **Next.js 15**: App Routerを使用
- **MUI (Material-UI)**: UIコンポーネントライブラリ
- **TypeScript**: 型安全性の確保

### バックエンド
- **Next.js API Routes**: サーバーサイドロジック
- **MongoDB**: データベース
- **Mongoose**: MongoDBのODM
- **NextAuth.js**: 認証機能
- **Nodemailer**: メール送信機能

### AI・外部API
- **Claude API (Haiku 4.5)**: コードレビュー機能

### インフラ・デプロイ
- **Vercel**: フロントエンド・APIのデプロイ（推奨）
- **MongoDB Atlas**: クラウドデータベース（推奨）

---

## データモデル（MongoDB）

### User（ユーザー）
```javascript
{
  _id: ObjectId,
  email: String,
  name: String,
  password: String (hashed),
  avatar: String (URL),
  skillLevel: String (beginner, intermediate, advanced),
  languages: [String],
  plan: String (free, basic, premium),
  reviewCount: Number,
  createdAt: Date,
  updatedAt: Date
}
```

### CodeReview（コードレビュー）
```javascript
{
  _id: ObjectId,
  userId: ObjectId,
  title: String,
  description: String,
  code: String,
  language: String,
  isPublic: Boolean,
  reviewResult: {
    errors: [String],
    warnings: [String],
    suggestions: [String],
    qualityScore: Number,
    reviewText: String
  },
  createdAt: Date,
  updatedAt: Date
}
```

### ReviewHistory（レビュー履歴）
```javascript
{
  _id: ObjectId,
  userId: ObjectId,
  codeReviewId: ObjectId,
  reviewDate: Date,
  qualityScore: Number,
  improvementCount: Number
}
```

---

## 開発スケジュール（目安）

### Week 1-2: 基盤構築
- Next.js 15プロジェクトのセットアップ
- MongoDB接続設定
- NextAuth.jsの設定
- 基本的なUIコンポーネントの作成

### Week 3-4: 認証・アカウント機能
- ユーザー登録・ログイン機能
- プロフィール管理機能
- メール認証機能

### Week 5-6: コード投稿・レビュー機能
- コード投稿機能
- Claude API連携
- AIコードレビュー機能
- レビュー結果表示機能

### Week 7-8: ダッシュボード・履歴機能
- レビュー履歴機能
- 学習進捗可視化機能
- メール通知機能

### Week 9-10: テスト・デプロイ
- テスト実装
- バグ修正
- デプロイ準備
- 本番環境へのデプロイ

---

## 成功指標（KPI）

### ユーザー関連
- 月間アクティブユーザー数（MAU）
- 登録完了率
- 初回投稿率
- リテンション率（1週間、1ヶ月）

### 機能関連
- 1ユーザーあたりの平均投稿数
- 1ユーザーあたりの平均レビュー数
- レビュー完了率
- レビュー満足度（アンケート）

### ビジネス関連
- 無料プランから有料プランへの転換率（将来）
- 顧客獲得単価（CAC）
- 顧客生涯価値（LTV）

